#!/usr/bin/env node

var tapmin = require('../')
var stream = tapmin()

process.stdin
  .pipe(stream)
  .pipe(process.stdout)

process.on('exit', function() {
  // https://github.com/scottcorgan/tap-spec/commit/0f475a14b9dd7c5c0551c9482f445a0804e12546#diff-168726dbe96b3ce427e7fedce31bb0bcR69
  if (stream.count < 1) process.exit(1)

  if (stream.errors.length) process.exit(1)
})
